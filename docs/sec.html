<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <meta name="theme-color" content="#06070a" />
  <title>Tap-n-Score™ — Shooter Experience Card</title>

  <!-- Your existing CSS -->
  <link rel="stylesheet" href="./sec.css?v=20260206a" />
</head>

<body>
  <main class="page">
    <section class="shell">

      <!-- HEADER -->
      <header class="hdr">
        <div class="hdrTitle">
          <!-- Title is the "press-and-hold" secret toggle target -->
          <div class="brand" id="secTitle">
            <span class="r">SHOOTER</span>
            <span class="w">EXPERIENCE</span>
            <span class="b">CARD</span>
          </div>

          <div class="pillRow">
            <div class="pill">
              <span class="pillLabel">Session:</span>
              <span class="pillValue" id="secSession">—</span>
            </div>
            <div class="pill">
              <span class="pillLabel">Shots:</span>
              <span class="pillValue" id="secShots">0</span>
            </div>
          </div>
        </div>
      </header>

      <!-- BODY GRID -->
      <section class="grid">

        <!-- LEFT: SCORING + ADJUSTMENTS + HISTORY -->
        <section class="leftCol">

          <!-- SCORING -->
          <article class="card">
            <div class="cardHead">
              <div class="cardKicker">SCORING</div>
            </div>

            <div class="scoreWrap">
              <div class="scoreLabel">SHOOTER’S SCORE</div>
              <div class="scoreBox">
                <div class="scoreValue" id="secScore">—</div>
              </div>
            </div>
          </article>

          <!-- ADJUSTMENTS -->
          <article class="card">
            <div class="cardHead">
              <div class="cardKicker">ADJUSTMENTS</div>
            </div>

            <div class="adjustTitle">Target clicks</div>

            <div class="adjustGrid">
              <!-- WINDAGE -->
              <div class="adjustItem">
                <div class="adjustMini">WINDAGE</div>

                <div class="adjustRow">
                  <div class="adjustNum" id="secWindClicks">0.00</div>

                  <div class="dirStack">
                    <div class="dirPill" id="secWindDir">—</div>
                  </div>
                </div>
              </div>

              <!-- ELEVATION -->
              <div class="adjustItem">
                <div class="adjustMini">ELEVATION</div>

                <div class="adjustRow">
                  <div class="adjustNum" id="secElevClicks">0.00</div>

                  <div class="dirStack">
                    <div class="dirPill" id="secElevDir">—</div>
                  </div>
                </div>
              </div>
            </div>
          </article>

          <!-- HISTORY -->
          <article class="card">
            <div class="cardHead">
              <div class="cardKicker">HISTORY</div>
            </div>

            <div class="historyGrid">
              <div class="histItem">
                <div class="histMini">PREV 1</div>
                <div class="histVal" id="prev1">—</div>
              </div>
              <div class="histItem">
                <div class="histMini">PREV 2</div>
                <div class="histVal" id="prev2">—</div>
              </div>
              <div class="histItem">
                <div class="histMini">PREV 3</div>
                <div class="histVal" id="prev3">—</div>
              </div>
            </div>
          </article>

        </section>

        <!-- RIGHT: ACTIONS -->
        <aside class="rightCol">
          <article class="card actionsCard">
            <div class="cardHead">
              <div class="cardKicker">ACTIONS</div>
            </div>

            <div class="btnCol">
              <button id="downloadBtn" class="btn btnPrimary btnDisabled" aria-disabled="true">
                Download SEC
              </button>

              <button id="vendorBtn" class="btn btnDisabled" aria-disabled="true">
                Buy more targets
              </button>

              <button id="surveyBtn" class="btn btnDisabled" aria-disabled="true">
                Survey
              </button>

              <button id="backToTargetBtn" class="btn">
                Back to target
              </button>
            </div>

            <div class="tip">
              Tip (iPad): if download doesn’t start, you can also press-and-hold the image on the download page and save it.
            </div>

            <!-- DEBUG DIAGNOSTICS (HIDDEN BY DEFAULT) -->
            <details class="diag" id="secDiagWrap" style="display:none">
              <summary>Diagnostics</summary>
              <pre id="secDiag">(none)</pre>
            </details>
          </article>
        </aside>

      </section>

      <footer class="foot">SCZN3</footer>
    </section>
  </main>

  <!-- Your existing SEC logic -->
  <script src="./sec.js?v=20260206a"></script>

  <!-- DIAGNOSTICS VISIBILITY LOCK -->
  <script>
    (() => {
      const $ = (id) => document.getElementById(id);

      const diagWrap = $("secDiagWrap");
      const title = $("secTitle");

      function hasDebugParam() {
        try {
          return new URL(location.href).searchParams.get("debug") === "1";
        } catch {
          return (location.search || "").includes("debug=1");
        }
      }

      function showDiag(openIt) {
        if (!diagWrap) return;
        diagWrap.style.display = "";
        if (openIt) diagWrap.open = true;
      }

      function hideDiag() {
        if (!diagWrap) return;
        diagWrap.open = false;
        diagWrap.style.display = "none";
      }

      // 1) URL param: ?debug=1
      if (hasDebugParam()) showDiag(true);
      else hideDiag();

      // 2) Secret: press-and-hold title to toggle (works even without ?debug=1)
      let pressTimer = null;
      function startHold() {
        if (!diagWrap) return;
        clearTimeout(pressTimer);
        pressTimer = setTimeout(() => {
          const isHidden = diagWrap.style.display === "none";
          if (isHidden) showDiag(true);
          else hideDiag();
        }, 650); // hold time
      }
      function endHold() {
        clearTimeout(pressTimer);
        pressTimer = null;
      }

      if (title) {
        title.addEventListener("mousedown", startHold);
        title.addEventListener("touchstart", startHold, { passive: true });

        title.addEventListener("mouseup", endHold);
        title.addEventListener("mouseleave", endHold);
        title.addEventListener("touchend", endHold);
        title.addEventListener("touchcancel", endHold);
      }
    })();
  </script>
</body>
</html>
